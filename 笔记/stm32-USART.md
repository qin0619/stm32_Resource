# 1、通信



## 1.1通信

按数据通信方式分类：串行通信、并行通信

![image-20241115221059689](.\img\usart1.png)

![image-20241115221140571](.\img\image-20241115221140571.png)

| 特点     | 传输速率 | 抗干扰能力 | 通信距离 | IO资源占用 | 成本 |
| -------- | -------- | ---------- | -------- | ---------- | ---- |
| 串行通信 | 较低     | 较强       | 较长     | 较少       | 较低 |
| 并行通信 | 较高     | 较弱       | 较短     | 较多       | 较高 |



## 1.2 单工/半双工/全双工通信

按数据传输方向分类：单工通信、半双工通信、全双工通信

![image-20241115221238991](.\img\image-20241115221238991.png)



## 1.3 同步/异步通信

按数据同步方式分类：同步通信、异步通信

**同步通信：共用同一时钟信号**

**异步通信：没有时钟信号，通过在数据信号中加入起始位和停止位等一些同步信号**



## 1.4 波特率

1，比特率：每秒钟传送的比特数，单位bit/s

2，波特率：每秒钟传送的码元数，单位Baud

3，比特率 = 波特率 * log2 M ，M表示每个码元承载的信息量

4，二进制系统中，波特率数值上等于比特率



## 1.5 常见的串行通信接口

| 通信接口               | 接口引脚                                                     | 数据同步方式 | 数据传输方向 |
| ---------------------- | ------------------------------------------------------------ | ------------ | ------------ |
| UART  (通用异步收发器) | TXD:发送端  RXD:接收端  GND:公共地                           | 异步通信     | 全双工       |
| 1-wire                 | DQ:发送/接收端                                               | 异步通信     | 半双工       |
| IIC                    | SCL:同步时钟  SDA:数据输入/输出端                            | 同步通信     | 半双工       |
| SPI                    | SCK:同步时钟  MISO:主机输入，从机输出  MOSI:主机输出，从机输入  CS:片选信号 | 同步通信     | 全双工       |



# 2、串口

串口：串行通信接口：指按位发送和接收的接口，如：RS-232/422/485等

结论：**COMS/TTL电平不能与RS-232电平直接交换信息**（需加入电平转换芯片）

两个设备之间的TXD和RXD，必须交差连接，方可正常通信



## RS-232异步通信协议

启动位：必须占1个位长，保持逻辑0电平

有效数据位： 可选5、6、7、8、9个位长，LSB在前，MSB在后

校验位: 可选占1个位长，也可以没有该位

停止位: 必须有，可选占0.5、1、1.5、2个位长，保持逻辑1电平



## usart简介

- *Universal synchronous asynchronous receiver transmitter，通用同步异步收发器*
- *Universal asynchronous receiver transmitter，通用异步收发器*
- *USART/UART都可以与外部设备进行全双工异步通信*
- *USART，我们常用的也是异步通信*



1，全双工异步通信

2，单线半双工通信

3，单独的发送器和接收器使能位

4，可配置使用DMA的多缓冲器通信

5， 多个带标志的中断源

![image-20241115221849824](.\img\image-20241115221849824.png)



![uTools_1731680450464](.\img\uTools_1731680450464.png)

## 回调机制

### 普通回调

![image-20241116223408338](C:\Users\payphone\AppData\Roaming\Typora\typora-user-images\image-20241116223408338.png)



即用户可自定义msp回调函数，来根据初始化对象的基地址来配置初始化对象所用的硬件

### 中断回调

![image-20241116215906736](.\img\image-20241116215906736.png)





![image-20241116183522547](.\img\image-20241116183522547.png)

# 复用

通用：IO端口的输入或输出是由GPIO外设控制，我们称之为通用

复用：IO端口的输入或输出是由其它非GPIO外设控制，我们称之为复用

![image-20241116183735736](.\img\image-20241116183735736.png)
